<div class="container">
    <div class="header">
      <h1>–ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–¥–∞—á</h1>
      <a routerLink="/create" class="btn btn-primary">
        ‚ûï –ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞
      </a>
    </div>
  
    <div class="task-list">
      <div class="filter-group">
        <select [(ngModel)]="selectedStatus" (change)="onStatusChange()">
          <option [value]="undefined">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
          <option value="New">–ù–æ–≤–∞—è</option>
          <option value="InProgress">–í —Ä–∞–±–æ—Ç–µ</option>
          <option value="Completed">–ó–∞–≤–µ—Ä—à–µ–Ω–∞</option>
        </select>
      </div>
  
      <table class="task-table">
        <thead>
          <tr>
            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
            <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
            <th>–°—Ç–∞—Ç—É—Å</th>
            <th>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let task of tasks">
            <td>{{ task.title }}</td>
            <td>
              <div class="description-container">
                <div 
                  class="description-content"
                  [class.expanded]="isExpanded(task.id)"
                  (click)="toggleDescription(task.id)"
                >
                  {{ task.description }}
                </div>
                <button 
                    *ngIf="task.description && task.description.length > 100"
                    class="toggle-description"
                    (click)="toggleDescription(task.id)"
                    >
                  {{ isExpanded(task.id) ? '–°–≤–µ—Ä–Ω—É—Ç—å' : '–ü–æ–¥—Ä–æ–±–Ω–µ–µ...' }}
                </button>
              </div>
            </td>
            <td><span class="status status-{{task.status.toLowerCase()}}">{{ getStatusText(task.status) }}</span></td>
            <td>{{ task.createdAt | date:'dd.MM.yyyy HH:mm' }}</td>
            <td>
              <div class="action-buttons">
                <a [routerLink]="['/edit', task.id]" class="action-btn edit" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">
                  ‚úèÔ∏è
                </a>
                <button (click)="deleteTask(task.id)" class="action-btn delete" title="–£–¥–∞–ª–∏—Ç—å">
                  üóëÔ∏è
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
  
      <div class="pagination">
        <button (click)="previousPage()" [disabled]="currentPage === 1" class="btn">‚Üê –ù–∞–∑–∞–¥</button>
        <span class="page-number">–°—Ç—Ä–∞–Ω–∏—Ü–∞ {{currentPage}}</span>
        <button (click)="nextPage()" class="btn">–í–ø–µ—Ä–µ–¥ ‚Üí</button>
      </div>
    </div>
  </div>